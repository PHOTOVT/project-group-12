{"version":3,"file":"commonHelpers.js","sources":["../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\nimport * as basicLightbox from 'basiclightbox';\nimport iziToast from 'izitoast';\n\nconst refs = {\n  inputElements: document.querySelectorAll('input'),\n  inputEmail: document.querySelector('.form-email'),\n  inputComment: document.querySelector('.form-comment'),\n  buttonElement: document.querySelector('.form-button'),\n};\n\nconst maxLength = 30;\nconst inputEmailValue = refs.inputEmail.value.trim();\nconst inputCommentValue = refs.inputComment.value.trim();\n\nconst overflowInput = (inputElements, maxLength) => {\n  if (inputElements.value.length > maxLength) {\n    inputElements.value = inputElements.value.slice(0, maxLength - 3) + '...';\n  }\n};\n\nrefs.inputElements.forEach(inputElement => {\n  inputElement.addEventListener('input', () =>\n    overflowInput(inputElement, maxLength)\n  );\n});\n\nconst saveToLocalStorage = (key, value) => {\n  const jsonData = JSON.stringify(value);\n  localStorage.setItem(key, jsonData);\n};\n\nconst loadFromLocalStorage = key => {\n  const json = localStorage.getItem(key);\n  try {\n    const data = JSON.parse(json);\n    return data;\n  } catch {\n    return json;\n  }\n};\n\nasync function postData(inputEmailValue, inputCommentValue) {\n  const url = 'https://portfolio-js.b.goit.study/api';\n  const params = {\n    email: inputEmailValue.value,\n    comment: inputCommentValue.value,\n    headers: {\n        'Content-Type': 'application/json'\n    },\n  };\n\n  try {\n    const response = await axios.post(url, params);\n    if (response.ok) {\n      const instance = basicLightbox.create(`\n    <div class=\"modal\">\n    <h2 class=\"modal-title\">Thank you for your interest in cooperation!</h2>\n        <p class=\"modal-text\">\n        The manager will contact you shortly to discuss further details and opportunities for cooperation. Please stay in touch.\n        </p>\n    </div>\n`);\n      instance.show();\n      form.reset();\n      return response;\n    } \n  }\n   catch (error) {\n    iziToast.show({\n        message:\n          'An error occurred while posting your data. Please, try again later.',\n        position: 'bottomCenter',\n        backgroundColor: '#ED3B44',\n        messageColor: '#ffffff',\n        theme: 'dark',\n        maxWidth: '350px',\n      });\n\n      formElement.addEventListener('input', e => {\n        const post = {\n          email: refs.inputEmail.value.trim(),\n          comment: refs.inputComment.value.trim(),\n        };\n\n        saveToLocalStorage('email', post.email.value);\n        saveToLocalStorage('comment', post.comment.value);\n      });\n\n      form.addEventListener('submit', e => {\n        e.preventDefault();\n        post.email = form.elements.email.value;\n        post.comment = form.elements.message.value;\n        console.log(post);\n        form.reset();\n        localStorage.removeItem('email');\n        localStorage.removeItem('comment');\n      });\n\n      document.addEventListener('DOMContentLoaded', () => {\n        loadFromLocalStorage('email');\n        loadFromLocalStorage('comment');\n        form.elements.email.value = post.email;\n        form.elements.comment.value = post.comment;\n      });\n  }\n}\n\nrefs.buttonElement.addEventListener('submit', postData);"],"names":["refs","maxLength","overflowInput","inputElements","inputElement","saveToLocalStorage","key","value","jsonData","loadFromLocalStorage","json","postData","inputEmailValue","inputCommentValue","url","params","response","axios","basicLightbox.create","iziToast","e","post"],"mappings":"owBAIA,MAAMA,EAAO,CACX,cAAe,SAAS,iBAAiB,OAAO,EAChD,WAAY,SAAS,cAAc,aAAa,EAChD,aAAc,SAAS,cAAc,eAAe,EACpD,cAAe,SAAS,cAAc,cAAc,CACtD,EAEMC,EAAY,GACMD,EAAK,WAAW,MAAM,KAAO,EAC3BA,EAAK,aAAa,MAAM,KAAO,EAEzD,MAAME,EAAgB,CAACC,EAAeF,IAAc,CAC9CE,EAAc,MAAM,OAASF,IAC/BE,EAAc,MAAQA,EAAc,MAAM,MAAM,EAAGF,EAAY,CAAC,EAAI,MAExE,EAEAD,EAAK,cAAc,QAAQI,GAAgB,CACzCA,EAAa,iBAAiB,QAAS,IACrCF,EAAcE,EAAcH,CAAS,CACzC,CACA,CAAC,EAED,MAAMI,EAAqB,CAACC,EAAKC,IAAU,CACzC,MAAMC,EAAW,KAAK,UAAUD,CAAK,EACrC,aAAa,QAAQD,EAAKE,CAAQ,CACpC,EAEMC,EAAuBH,GAAO,CAClC,MAAMI,EAAO,aAAa,QAAQJ,CAAG,EACrC,GAAI,CAEF,OADa,KAAK,MAAMI,CAAI,CAEhC,MAAU,CACN,OAAOA,CACR,CACH,EAEA,eAAeC,EAASC,EAAiBC,EAAmB,CAC1D,MAAMC,EAAM,wCACNC,EAAS,CACb,MAAOH,EAAgB,MACvB,QAASC,EAAkB,MAC3B,QAAS,CACL,eAAgB,kBACnB,CACL,EAEE,GAAI,CACF,MAAMG,EAAW,MAAMC,EAAM,KAAKH,EAAKC,CAAM,EAC7C,GAAIC,EAAS,GASX,OARiBE,EAAAA,OAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAO3C,EACc,KAAI,EACb,KAAK,MAAK,EACHF,CAEV,MACc,CACbG,EAAS,KAAK,CACV,QACE,sEACF,SAAU,eACV,gBAAiB,UACjB,aAAc,UACd,MAAO,OACP,SAAU,OAClB,CAAO,EAED,YAAY,iBAAiB,QAASC,GAAK,CACzC,MAAMC,EAAO,CACX,MAAOrB,EAAK,WAAW,MAAM,KAAM,EACnC,QAASA,EAAK,aAAa,MAAM,KAAM,CACjD,EAEQK,EAAmB,QAASgB,EAAK,MAAM,KAAK,EAC5ChB,EAAmB,UAAWgB,EAAK,QAAQ,KAAK,CACxD,CAAO,EAED,KAAK,iBAAiB,SAAUD,GAAK,CACnCA,EAAE,eAAc,EAChB,KAAK,MAAQ,KAAK,SAAS,MAAM,MACjC,KAAK,QAAU,KAAK,SAAS,QAAQ,MACrC,QAAQ,IAAI,IAAI,EAChB,KAAK,MAAK,EACV,aAAa,WAAW,OAAO,EAC/B,aAAa,WAAW,SAAS,CACzC,CAAO,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAClDX,EAAqB,OAAO,EAC5BA,EAAqB,SAAS,EAC9B,KAAK,SAAS,MAAM,MAAQ,KAAK,MACjC,KAAK,SAAS,QAAQ,MAAQ,KAAK,OAC3C,CAAO,CACJ,CACH,CAEAT,EAAK,cAAc,iBAAiB,SAAUW,CAAQ"}